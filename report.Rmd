---
title: "Report Lucene"
author: "Aarón Blanco Álvarez"
date: "28/4/2021"
output: 
  pdf_document: 
    keep_tex: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction

In this report we are going to discuss the evolution in the three versions of Lucene. For this goal, we need tools to make the analysis like R Studio, R, etc.
With this approach, will get metrics of the system in a clear way than other tools and also, R provide us the possibility of make our own metrics.

# Materials and methods

For our purpose, we need RStudio with R, the programming language itself. Also, the data in csv from the execution of Sourcemeter.
Furthermore, we will install some packages to load csv among others. 
Here is an example:

![package instalation](EXCEL.png)

# System Metrics
Let us start with the main metrics, after import the excel, we will use R to read the excels.

## (Method Hiding Factor –MHF-)

This is the proportion of hiding methods. Firstly, we have to read the excels, we can do that with the __read.csv__ instruction, after that, we can save the columns need it in two variables. In this case, NM and NPM. The meaning of this two variables are _number of methods_ and _number of public methods_.

As we can see, we can get private methods proportion if we make the operation of divide number of public methods between all methods, then, subtract to one. 
In theory, with each version, MHF is increasing, which means that will be less bugs and technical debt, nevertheless, is very small in this case.



```{r}
luc49_Class  <- read.csv("Excel/Lucene4.9.0/luc49-Class.csv") 
luc491_Class  <- read.csv("Excel/Lucene4.9.1/luc491-Class.csv") 
luc41_Class  <- read.csv("Excel/Lucene4.10/luc410-Class.csv") 

NM <- luc49_Class[["NM"]];
NPM <- luc49_Class[["NPM"]];
Privado4.9 <- (1-(sum(NPM)/sum(NM)));
print(Privado4.9);

NM <- luc491_Class[["NM"]];
NPM <- luc491_Class[["NPM"]];
Privado4.9.1 <- (1-(sum(NPM)/sum(NM)));
print(Privado4.9.1);

NM <- luc41_Class[["NM"]];
NPM <- luc41_Class[["NPM"]];
Privado4.1 <- (1-(sum(NPM)/sum(NM)));
print(Privado4.1);

```

## (Attribute Hiding Factor –AHF-)

This is the proportion of hiding attributes. In this metric, we can make the same as before but in this case, changing the number of methods for attributes.
So, we are working here with the number of attributes and NPA, public attributes. The formula is almost the same, but we are working with that two columns. Special mention that in this case, we have a problem with the column, so the only option was use the number of the column, in my case, 43.

```{r}

NAtt <- luc49_Class[, 43];
NPA <- luc49_Class[["NPA"]];
APrivado <- 1-(sum(NPA)/sum(NAtt));
print(APrivado);

NAtt <- luc491_Class[, 43];
NPA <- luc491_Class[["NPA"]];
APrivado4.9.1 <- 1-(sum(NPA)/sum(NAtt));
print(APrivado4.9.1);

NAtt <- luc41_Class[, 43];
NPA <- luc41_Class[["NPA"]];
APrivado4_1 <- (1-(sum(NPA)/sum(NAtt)));
print(APrivado4_1);
```


## (Method Inheritance Factor –MIF-)

```{r}


#Proporción de métodos heredados


#Leemos el dataset  
NM <- luc49_Class[["NM"]];
NLM <- luc49_Class[["NLM"]];
#Calculamos el número de métodos heredados restando el número total de métodos al número de métodos publicos locales.
HEREADOS <- (NM - NLM);
#La proporción la hacemos mediante heredados dividos entre numero de métodos totales.
MIF <- (sum(HEREADOS)/sum(NM));
print(MIF);


NM <- luc491_Class[["NM"]];
NLM <- luc491_Class[["NLM"]];
HEREADOS <- (NM - NLM);
MIF4.9.1 <- (sum(HEREADOS)/sum(NM));
print(MIF4.9.1);

NM <- luc41_Class[["NM"]];
NLM <- luc41_Class[["NLM"]];
HEREADOS <- (NM - NLM);
MIF4.1 <- (sum(HEREADOS)/sum(NM));
print(MIF4.1);

```
## (Attribute Inheritance Factor –AIF-)


```{r}

#Proporción de atributos heredados.


#Leemos el dataset  
NAtt <- luc49_Class[["X43"]];
NLA <- luc49_Class[["NLA"]];
#Calculamos el número de atributos heredados restando el número total de atributos al número de atributos publicos locales.
HEREADOS <- (NAtt - NLA);
#La proporción la hacemos mediante heredados dividos entre numero de atributos totales.
MIF <- (sum(HEREADOS)/sum(NAtt));
print(MIF);


NAtt <- luc491_Class[["X43"]];
NLA <- luc491_Class[["NLA"]];
HEREADOS <- (NAtt - NLA);
MIF4.9.1 <- (sum(HEREADOS)/sum(NAtt));
print(MIF4.9.1);


NAtt <- luc41_Class[["X43"]];
NLA <- luc41_Class[["NLA"]];
HEREADOS <- (NAtt - NLA);
MIF4.1 <- (sum(HEREADOS)/sum(NAtt));
print(MIF4.1);


```
## Polymorphism Factor (PF)
```{r}
#Proporción de polimorfismo.
#Polymorphism Factor (PF)



```

## (Coupling Factor –CF-)

```{r}

#Proporción de acoplamiento.
#(Coupling Factor –CF-)


# Acomplamiento y numero de ancestros
CBO <- luc49_Class[["CBO"]];
NOA <- luc49_Class[["NOA"]];
numeroClases <- length(luc49_Class[["ID"]]);
NumR <- CBO-NOA;
CF <- (numeroClases - 1)/sum(NumR);
print(CF);

CBO <- luc491_Class[["CBO"]];
NOA <- luc491_Class[["NOA"]];
numeroClases <- length(luc491_Class[["ID"]]);
NumR <- CBO-NOA;
CF <- (numeroClases - 1)/sum(NumR);
print(CF);

CBO <- luc41_Class[["CBO"]];
NOA <- luc41_Class[["NOA"]];
numeroClases <- length(luc41_Class[["ID"]]);
NumR <- CBO-NOA;
CF <- (numeroClases - 1)/sum(NumR);
print(CF);


```

## Metricas personales.

```{r}


#Metricas personales.

#



```